<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>ç†Šç†Šå¡”ç¾…å åœ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      padding: 0;
      font-family: "Noto Sans TC", -apple-system, BlinkMacSystemFont, sans-serif;
      background: linear-gradient(180deg, #2d254a, #6a4f9c, #f9e4c8);
      color: #fff;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      min-height: 100vh;
    }
    .game-wrap {
      max-width: 480px;
      width: 100%;
      padding: 16px;
      margin-top: 16px;
      position: relative;
      overflow: hidden;
    }
    .card-panel {
      background: rgba(255, 247, 230, 0.95);
      border-radius: 18px;
      border: 2px solid #f7dba5;
      box-shadow: 0 4px 14px rgba(0,0,0,0.25);
      padding: 18px 14px 20px;
      color: #4a3450;
    }
    h1 {
      margin: 0 0 4px;
      font-size: 22px;
      text-align: center;
      letter-spacing: 0.15em;
    }
    .subtitle {
      text-align: center;
      font-size: 13px;
      color: #7c5c88;
      margin-bottom: 12px;
    }
    .star-divider {
      text-align: center;
      font-size: 16px;
      margin-bottom: 10px;
    }
    .btn-bar {
      text-align: center;
      margin-bottom: 10px;
    }
    button {
      border: none;
      border-radius: 999px;
      padding: 10px 22px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      background: linear-gradient(135deg, #ffcf5f, #ff9f7b);
      color: #4a2a18;
      box-shadow: 0 3px 8px rgba(0,0,0,0.25);
      transition: transform 0.1s ease, box-shadow 0.1s ease, opacity 0.2s ease;
    }
    button:active {
      transform: translateY(1px) scale(0.98);
      box-shadow: 0 1px 4px rgba(0,0,0,0.3);
    }
    button:disabled {
      opacity: 0.6;
      cursor: default;
      box-shadow: none;
    }

    /* ä¸‰å¼µç‰Œå€åŸŸ */
    .table {
      margin-top: 10px;
      display: flex;
      justify-content: space-between;
      gap: 6px;
    }
    .slot-title {
      text-align: center;
      font-size: 12px;
      color: #8f6c9b;
      margin-bottom: 4px;
    }
    .card-slot {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    /* å¡ç‰‡æœ¬é«” */
    .card {
      width: 90px;
      height: 140px;
      perspective: 900px;
      cursor: pointer;
      opacity: 0;
      transform: translateY(20px) scale(0.9);
      pointer-events: none;
      transition: transform 0.2s ease;
    }
    .card.show {
      animation: cardEnter 0.45s forwards;
    }
    .card-inner {
      width: 100%;
      height: 100%;
      position: relative;
      transform-style: preserve-3d;
      transition: transform 0.6s ease;
    }
    /* æ­£ä½ï¼šå¾€ä¸€é‚Šç¿» */
    .card.flipped .card-inner {
      transform: rotateY(180deg);
    }
    /* é€†ä½ï¼šå¾€å¦ä¸€é‚Šç¿»ï¼ˆåæ–¹å‘æ—‹è½‰ï¼‰ */
    .card.is-reversed.flipped .card-inner {
      transform: rotateY(-180deg);
    }
    .card-face {
      position: absolute;
      inset: 0;
      border-radius: 12px;
      backface-visibility: hidden;
      box-shadow: 0 4px 9px rgba(0,0,0,0.25);
    }
    .card-back {
      background: radial-gradient(circle at 30% 20%, #ffeaa7, #f0932b, #e056fd);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 30px;
      color: #fffdf0;
      border: 2px solid rgba(255,255,255,0.85);
      position: relative;
      overflow: hidden;
    }
    .card-back::before {
      content: "â˜…";
      position: absolute;
      font-size: 48px;
      opacity: 0.2;
      top: -8px;
      right: 8px;
    }
    .card-front {
      transform: rotateY(180deg);
      background: #fff9ef;
      border: 2px solid #f3c79b;
      padding: 10px 7px;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }
    /* é€†ä½ï¼šé‚Šæ¡†é¡è‰²ç•¥æœ‰ä¸åŒï¼‹å¾®å¾®æ­ªæ–œæ„Ÿ */
    .card.is-reversed .card-front {
      border-color: #b895f5;
    }
    .card.is-reversed {
      transform: translateY(20px) scale(0.9) rotateZ(-2deg);
    }
    .card.show.card.is-reversed {
      animation: cardEnterReversed 0.45s forwards;
    }

    .card-name {
      font-size: 13px;
      font-weight: 700;
      text-align: center;
      color: #7a3f5f;
      margin-bottom: 4px;
    }
    .card-tag {
      font-size: 11px;
      text-align: center;
      color: #c77a68;
      margin-bottom: 6px;
    }
    .card-meaning {
      font-size: 11px;
      line-height: 1.4;
      color: #5c3b4c;
      flex: 1;
    }
    .card-icon {
      text-align: center;
      font-size: 18px;
      margin-top: 4px;
    }

    @keyframes cardEnter {
      from { opacity: 0; transform: translateY(20px) scale(0.9); }
      to   { opacity: 1; transform: translateY(0) scale(1); }
    }
    @keyframes cardEnterReversed {
      from { opacity: 0; transform: translateY(20px) scale(0.9) rotateZ(-5deg); }
      to   { opacity: 1; transform: translateY(0) scale(1) rotateZ(-2deg); }
    }

    /* ç†Šç†Šå°è©±æ¡† */
    .bear-dialog {
      position: fixed;
      left: 50%;
      bottom: 8%;
      transform: translateX(-50%);
      max-width: 460px;
      width: calc(100% - 32px);
      display: flex;
      align-items: flex-start;
      gap: 10px;
      background: rgba(255, 247, 230, 0.98);
      border-radius: 18px;
      border: 2px solid #f5d3a6;
      box-shadow: 0 6px 18px rgba(0,0,0,0.35);
      padding: 10px 12px 12px;
      color: #4b3044;
      z-index: 30;
      animation: bearPop 0.4s ease-out;
    }
    .bear-dialog.hidden { display: none; }
    .bear-avatar {
      width: 42px;
      height: 42px;
      border-radius: 50%;
      background: radial-gradient(circle at 30% 20%, #ffeaa7, #ff9f7b);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 26px;
      flex-shrink: 0;
    }
    .bear-text { flex: 1; font-size: 13px; }
    .bear-title {
      font-weight: 700;
      margin-bottom: 4px;
      color: #8a4d5c;
    }
    .bear-message {
      font-size: 13px;
      line-height: 1.5;
      white-space: pre-line;
      margin-bottom: 6px;
    }
    .bear-actions { text-align: right; }
    .bear-actions button {
      font-size: 12px;
      padding: 6px 14px;
      box-shadow: none;
    }
    @keyframes bearPop {
      from { transform: translate(-50%, 40px) scale(0.9); opacity: 0; }
      to   { transform: translate(-50%, 0) scale(1); opacity: 1; }
    }

    /* æ˜Ÿæ˜Ÿç²’å­å±¤ */
    .star-layer {
      pointer-events: none;
      position: absolute;
      inset: 0;
      overflow: hidden;
      z-index: -1;
    }
    .star {
      position: absolute;
      width: 4px;
      height: 4px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.9);
      box-shadow: 0 0 6px rgba(255,255,255,0.9);
      animation: starFloat 1.4s ease-out forwards;
      opacity: 0;
    }
    @keyframes starFloat {
      0% {
        transform: translate3d(0, 10px, 0) scale(0.3);
        opacity: 0;
      }
      20% { opacity: 1; }
      100% {
        transform: translate3d(0, -40px, 0) scale(1);
        opacity: 0;
      }
    }

    .hint {
      text-align: center;
      font-size: 11px;
      color: #edd2f4;
      margin-top: 6px;
    }

    @media (max-width: 400px) {
      .card {
        width: 80px;
        height: 124px;
      }
    }
  </style>
</head>
<body>
  <div class="game-wrap">
    <!-- æ˜Ÿæ˜Ÿç²’å­å±¤ -->
    <div class="star-layer" id="starLayer"></div>

    <div class="card-panel">
      <h1>ç†Šç†Šå¡”ç¾…å åœ</h1>
      <div class="subtitle">æ·±å‘¼å¸ 3 ç§’ï¼Œå¿ƒè£¡é»˜å¿µå•é¡Œï¼Œç„¶å¾Œé»ä¸‹æŒ‰éˆ•ã€‚</div>
      <div class="star-divider">âœ¦ âœ¦ âœ¦</div>

      <div class="btn-bar">
        <button id="startBtn">é–‹å§‹å åœ</button>
      </div>

      <div class="table">
        <!-- éå» -->
        <div class="card-slot" data-position="past">
          <div class="slot-title">éå»</div>
          <div class="card">
            <div class="card-inner">
              <div class="card-face card-back">â˜…</div>
              <div class="card-face card-front">
                <div class="card-name"></div>
                <div class="card-tag"></div>
                <div class="card-meaning"></div>
                <div class="card-icon"></div>
              </div>
            </div>
          </div>
        </div>
        <!-- ç¾åœ¨ -->
        <div class="card-slot" data-position="present">
          <div class="slot-title">ç¾åœ¨</div>
          <div class="card">
            <div class="card-inner">
              <div class="card-face card-back">â˜…</div>
              <div class="card-face card-front">
                <div class="card-name"></div>
                <div class="card-tag"></div>
                <div class="card-meaning"></div>
                <div class="card-icon"></div>
              </div>
            </div>
          </div>
        </div>
        <!-- æœªä¾† -->
        <div class="card-slot" data-position="future">
          <div class="slot-title">æœªä¾†</div>
          <div class="card">
            <div class="card-inner">
              <div class="card-face card-back">â˜…</div>
              <div class="card-face card-front">
                <div class="card-name"></div>
                <div class="card-tag"></div>
                <div class="card-meaning"></div>
                <div class="card-icon"></div>
              </div>
            </div>
          </div>
        </div>
      </div><!-- .table -->
    </div><!-- .card-panel -->

    <div class="hint">æç¤ºï¼šæŒ‰ã€Œé–‹å§‹å åœã€å¾Œï¼Œä¾åºé»ä¸‰å¼µç‰Œç¿»é–‹å”· âœ¨</div>
  </div><!-- .game-wrap -->

  <!-- ç†Šç†Šå°è©±æ¡† -->
  <div id="bearDialog" class="bear-dialog hidden">
    <div class="bear-avatar">ğŸ»</div>
    <div class="bear-text">
      <div class="bear-title">æ‘é•·ç†Šç†Šçš„å°æé†’</div>
      <div class="bear-message" id="bearMessage">
        ä»Šå¤©çš„èƒ½é‡æ­£åœ¨æº–å‚™ä¸­â€¦
      </div>
      <div class="bear-actions">
        <button id="againBtn">å†å ä¸€æ¬¡</button>
      </div>
    </div>
  </div>

  <script>
    // 22 å¼µå¤§ç§˜å„€ï¼šæ¯å¼µç‰Œæœ‰ æ­£ä½ / é€†ä½ ã€Œç‰Œç¾© + ç†Šç†ŠèªéŒ„ã€
    const tarotCards = [
      {
        name: "æ„šè€…",
        tag: "æ–°çš„é–‹å§‹ãƒ»è‡ªç”±ãƒ»æ—…ç¨‹",
        icon: "ğŸ’",
        upright: {
          meaning: "æ–°çš„æ—…ç¨‹ã€å‹‡æ•¢å˜—è©¦ã€å¸¶è‘—å¥½å¥‡å¿ƒå¾€å‰èµ°ï¼Œå…è¨±è‡ªå·±ç•¶æ–°æ‰‹ã€‚",
          bear: "ğŸ» ç†Šç†Šèªªï¼šå°±ç®—ä¸çŸ¥é“æœƒç™¼ç”Ÿä»€éº¼ä¹Ÿæ²’é—œä¿‚ã€‚ä½ é¡˜æ„è¸å‡ºå»çš„é‚£ä¸€æ­¥ï¼Œå°±æ˜¯æœ€å²å®³çš„å‹‡æ°£ï¼"
        },
        reversed: {
          meaning: "è¡å‹•æˆ–é€ƒé¿ï¼Œæé†’ä½ åœ¨å†’éšªå‰å…ˆåšå¥½åŸºæœ¬æº–å‚™ã€‚",
          bear: "ğŸ» ç†Šç†Šèªªï¼šåœä¸€ä¸‹æ²’é—œä¿‚ï¼Œæˆ‘åœ¨é€™è£¡é™ªä½ ã€‚æº–å‚™å¥½äº†å†èµ°ï¼Œä¹Ÿæ˜¯ä¸€ç¨®å¾ˆæ£’çš„å‹‡æ•¢å–”ã€‚"
        }
      },
      {
        name: "é­”è¡“å¸«",
        tag: "è¡Œå‹•ãƒ»å‰µé€ ãƒ»å°ˆæ³¨",
        icon: "âœ¨",
        upright: {
          meaning: "ä½ å·²ç¶“æœ‰è¶³å¤ èƒ½åŠ›ï¼Œå¯ä»¥é–‹å§‹å¯¦ç¾æƒ³æ³•ã€‚",
          bear: "ğŸ» ç†Šç†Šèªªï¼šä½ çš„é»å­çœŸçš„å¾ˆæ£’ï¼ç¾åœ¨å°±æ˜¯æœ€é©åˆé–‹å§‹è¡Œå‹•çš„æ™‚é–“ï½"
        },
        reversed: {
          meaning: "å¿ƒæ€æ•£äº‚ã€å°ˆæ³¨åŠ›ä¸è¶³ï¼Œéœ€è¦å›åˆ°æ ¸å¿ƒç›®æ¨™ã€‚",
          bear: "ğŸ» ç†Šç†Šèªªï¼šå…ˆæŠŠè…¦è¢‹çš„å°é›œéŸ³é—œèµ·ä¾†å§ã€‚å°ˆæ³¨ä¸€ä»¶äº‹ï¼Œä½ æœƒæ›´è¼•é¬†ï¼Œä¹Ÿæ›´æœ‰åŠ›é‡ã€‚"
        }
      },
      {
        name: "å¥³ç¥­å¸",
        tag: "ç›´è¦ºãƒ»å…§åœ¨ãƒ»éœå¿ƒ",
        icon: "ğŸŒ™",
        upright: {
          meaning: "å®‰éœä¸‹ä¾†ï¼Œç›´è¦ºæœƒçµ¦ä½ ç­”æ¡ˆã€‚",
          bear: "ğŸ» ç†Šç†Šèªªï¼šä½ å¿ƒè£¡å…¶å¯¦æ—©å°±çŸ¥é“ç­”æ¡ˆäº†ã€‚æˆ‘æœƒé™ªä½ ä¸€èµ·è½è½é‚£å€‹æŸ”è»Ÿçš„è²éŸ³ã€‚"
        },
        reversed: {
          meaning: "æƒ…ç·’æ··äº‚ã€æ€ç·’é‡ç–Šï¼Œéœ€è¦ä¼‘æ¯ã€‚",
          bear: "ğŸ» ç†Šç†Šèªªï¼šæ²’é—œä¿‚ï¼Œæˆ‘å€‘å…ˆåœä¸€ä¸‹ã€‚ä½ å€¼å¾—ä¸€å€‹å®‰éœçš„ç©ºé–“ï¼Œè®“å¿ƒæ…¢æ…¢å¹³éœä¸‹ä¾†ã€‚"
        }
      },
      {
        name: "çš‡å",
        tag: "æ»‹é¤Šãƒ»ç¾æ„Ÿãƒ»æ„›",
        icon: "ğŸ‘‘",
        upright: {
          meaning: "é©åˆç…§é¡§è‡ªå·±ã€äº«å—ç”Ÿæ´»ã€å‰µé€ ç¾ã€‚",
          bear: "ğŸ» ç†Šç†Šèªªï¼šä½ å€¼å¾—è¢«å¥½å¥½å‘µè­·ã€‚å¶çˆ¾å°è‡ªå·±æº«æŸ”ä¸€é»ï¼Œæ˜¯å¾ˆé‡è¦çš„å–”ã€‚"
        },
        reversed: {
          meaning: "éåº¦ä»˜å‡ºã€å¿½ç•¥è‡ªå·±ã€‚",
          bear: "ğŸ» ç†Šç†Šèªªï¼šä½ å·²ç¶“å¾ˆåŠªåŠ›äº†ï¼Œæ›ä½ ä¼‘æ¯ä¸€ä¸‹å§ã€‚æˆ‘æœƒæé†’ä½ ï¼ŒæŠŠæ„›åˆ†ä¸€äº›çµ¦è‡ªå·±ã€‚"
        }
      },
      {
        name: "çš‡å¸",
        tag: "çµæ§‹ãƒ»è²¬ä»»ãƒ»ç•Œç·š",
        icon: "ğŸ›ï¸",
        upright: {
          meaning: "éœ€è¦åˆ¶å®šç•Œç·šã€å»ºç«‹ç§©åºã€‚",
          bear: "ğŸ» ç†Šç†Šèªªï¼šç«™ç›´ã€æŠ¬é ­ï¼Œä½ å…¶å¯¦æ¯”è‡ªå·±æƒ³åƒå¾—æ›´èƒ½æŒæ§å±€é¢ã€‚"
        },
        reversed: {
          meaning: "å¤ªåƒµç¡¬æˆ–å¤ªæ§åˆ¶ã€‚",
          bear: "ğŸ» ç†Šç†Šèªªï¼šæŸ”è»Ÿä¸€é»é»ï¼Œä¸æœƒè®“ä½ è®Šå¼±ã€‚åè€Œèƒ½è®“ä½ å‘¼å¸å¾—æ›´è¼•é¬†ã€‚"
        }
      },
      {
        name: "æ•™çš‡",
        tag: "å­¸ç¿’ãƒ»æ™ºæ…§ãƒ»è¦ç¯„",
        icon: "ğŸ“–",
        upright: {
          meaning: "é©åˆè«‹æ•™å°ˆæ¥­ã€æŒ‰éƒ¨å°±ç­ã€‚",
          bear: "ğŸ» ç†Šç†Šèªªï¼šä½ ä¸æ˜¯ä¸€å€‹äººï¼Œæœ‰å¯ä¿¡ä»»çš„äººé¡˜æ„æ•™ä½ ã€é™ªä½ ã€‚"
        },
        reversed: {
          meaning: "ä¸æƒ³è¢«è¦å‰‡ç¶ä½ï¼Œæ¸´æœ›è‡ªç”±ã€‚",
          bear: "ğŸ» ç†Šç†Šèªªï¼šä½ å¯ä»¥å‰µé€ è‡ªå·±çš„æ–¹å¼ã€‚åªè¦å°è‡ªå·±èª å¯¦ï¼Œå°±èƒ½èµ°å‡ºä¸€æ¢æ–°çš„è·¯ã€‚"
        }
      },
      {
        name: "æˆ€äºº",
        tag: "é—œä¿‚ãƒ»é¸æ“‡ãƒ»æƒ…æ„Ÿ",
        icon: "ğŸ’–",
        upright: {
          meaning: "çœŸèª é€£çµã€é‡è¦é¸æ“‡ä¾†è‡¨ã€‚",
          bear: "ğŸ» ç†Šç†Šèªªï¼šæŠŠä½ çš„å¿ƒèªªå‡ºä¾†å§ã€‚çœŸæ­£é‡è¦çš„é€£çµï¼Œéƒ½ä¾†è‡ªçœŸèª ã€‚"
        },
        reversed: {
          meaning: "èª¤è§£ã€çŒ¶è±«ã€é—œä¿‚ä¸å¹³è¡¡ã€‚",
          bear: "ğŸ» ç†Šç†Šèªªï¼šåˆ¥æ€¥è‘—åšæ±ºå®šã€‚å…ˆè½è½è‡ªå·±å¿ƒè£¡çœŸæ­£çš„æ„Ÿå—ã€‚"
        }
      },
      {
        name: "æˆ°è»Š",
        tag: "è¡Œå‹•ãƒ»çªç ´ãƒ»æ§åˆ¶åŠ›",
        icon: "ğŸ‡",
        upright: {
          meaning: "å‰é€²ã€æˆ°å‹å›°é›£ã€æŒæ§æ–¹å‘ã€‚",
          bear: "ğŸ» ç†Šç†Šèªªï¼šæˆ‘çœ‹åˆ°ä½ å¾ˆåŠªåŠ›ï¼ç¹¼çºŒå¾€å‰ï¼Œä½ çœŸçš„åšå¾—åˆ°ï¼"
        },
        reversed: {
          meaning: "æ–¹å‘ä¸æ˜ã€å¤ªæ€¥èºã€‚",
          bear: "ğŸ» ç†Šç†Šèªªï¼šå…ˆæ…¢ä¸€é»ï¼Œä¸æ˜¯é€€æ­¥ï¼Œè€Œæ˜¯è®“ä½ æ›´æ¸…æ¥šè¦å¾€å“ªè£¡å»ã€‚"
        }
      },
      {
        name: "åŠ›é‡",
        tag: "å…§åœ¨å‹‡æ°£ãƒ»æŸ”å’ŒåŠ›é‡",
        icon: "ğŸ¦",
        upright: {
          meaning: "æº«æŸ”ä¹Ÿèƒ½å¾ˆæœ‰åŠ›é‡ã€‚",
          bear: "ğŸ» ç†Šç†Šèªªï¼šä½ ä¸éœ€è¦å¼·è£å …å¼·ï¼Œä½ æœ¬ä¾†å°±å·²ç¶“å¾ˆå‹‡æ•¢äº†ã€‚"
        },
        reversed: {
          meaning: "ç–²ç´¯ã€è‡ªæˆ‘æ‡·ç–‘ã€‚",
          bear: "ğŸ» ç†Šç†Šèªªï¼šä¼‘æ¯ä¸æ˜¯å¤±æ•—ã€‚ä½ å€¼å¾—è¢«æŠ±ä¸€æŠ±ã€å¥½å¥½å……é›»ã€‚"
        }
      },
      {
        name: "éš±è€…",
        tag: "å…§çœãƒ»ç¨è™•ãƒ»æ™ºæ…§",
        icon: "ğŸ•¯ï¸",
        upright: {
          meaning: "ä¸€å€‹äººçš„æ™‚é–“èƒ½å¸¶ä¾†ç­”æ¡ˆã€‚",
          bear: "ğŸ» ç†Šç†Šèªªï¼šä½ ä¸ç”¨æ€¥è‘—å›ç­”ä¸–ç•Œï¼Œå…ˆé™ªé™ªè‡ªå·±ä¹Ÿå¾ˆå¥½ã€‚"
        },
        reversed: {
          meaning: "å­¤å–®ã€å°é–‰å¤ªä¹…ã€‚",
          bear: "ğŸ» ç†Šç†Šèªªï¼šå¦‚æœé¡˜æ„ï¼Œæˆ‘åœ¨é€™è£¡ï¼Œå¯ä»¥é™ªä½ æ…¢æ…¢èµ°å‡ºå»ã€‚"
        }
      },
      {
        name: "å‘½é‹ä¹‹è¼ª",
        tag: "è½‰æ©Ÿãƒ»å¾ªç’°ãƒ»è®ŠåŒ–",
        icon: "ğŸ¡",
        upright: {
          meaning: "å¥½é‹è½‰å‹•ã€æ–°æ©Ÿæœƒå³å°‡ä¾†è‡¨ã€‚",
          bear: "ğŸ» ç†Šç†Šèªªï¼šæ¨ä¸€ä¸‹ä½ çš„å‘½é‹ä¹‹è¼ªå§ï¼æ©Ÿæœƒæ­£åœ¨é è¿‘ä½ ï½"
        },
        reversed: {
          meaning: "äº‹æƒ…åœæ»¯ã€æ™‚æ©Ÿæœªåˆ°ã€‚",
          bear: "ğŸ» ç†Šç†Šèªªï¼šåˆ¥å¿ƒæ€¥ï¼Œä½ è¦çš„æ±è¥¿æ²’æœ‰æ¶ˆå¤±ï¼Œåªæ˜¯æ­£åœ¨æº–å‚™æ›´å¥½çš„ç‰ˆæœ¬çµ¦ä½ ã€‚"
        }
      },
      {
        name: "æ­£ç¾©",
        tag: "å…¬æ­£ãƒ»èª å¯¦ãƒ»å¹³è¡¡",
        icon: "âš–ï¸",
        upright: {
          meaning: "éœ€è¦ç†æ€§ã€é¢å°çœŸç›¸ã€‚",
          bear: "ğŸ» ç†Šç†Šèªªï¼šèªªçœŸè©±éœ€è¦å‹‡æ°£ï¼Œè€Œä½ è¾¦å¾—åˆ°ã€‚"
        },
        reversed: {
          meaning: "æ„Ÿåˆ°ä¸å…¬å¹³ã€èª¤æœƒã€‚",
          bear: "ğŸ» ç†Šç†Šèªªï¼šå…ˆæŠŠå¿ƒå®‰æ’«å¥½ï¼Œå†ä¾†è«‡ä»€éº¼æ˜¯å…¬å¹³ã€‚ä½ å€¼å¾—è¢«ç†è§£ã€‚"
        }
      },
      {
        name: "åŠäºº",
        tag: "ç­‰å¾…ãƒ»æ”¾ä¸‹ãƒ»æ–°è§€é»",
        icon: "ğŸªœ",
        upright: {
          meaning: "åœä¸‹è…³æ­¥æ‰èƒ½çœ‹è¦‹æ–°æ–¹å‘ã€‚",
          bear: "ğŸ» ç†Šç†Šèªªï¼šæœ‰æ™‚å€™æ…¢ä¸‹ä¾†ï¼Œä¸æ˜¯è½å¾Œï¼Œè€Œæ˜¯è®“å¥‡è¹Ÿè¿½ä¸Šä½ ã€‚"
        },
        reversed: {
          meaning: "åœæ»¯å¤ªä¹…ã€æŠ—æ‹’æ”¹è®Šã€‚",
          bear: "ğŸ» ç†Šç†Šèªªï¼šä½ ä¸éœ€è¦ä¸€æ¬¡æ”¹è®Šå…¨éƒ¨ï¼Œå¾å°åœ°æ–¹é–‹å§‹å°±å¾ˆå¥½ã€‚"
        }
      },
      {
        name: "æ­»ç¥",
        tag: "çµæŸãƒ»è½‰åŒ–ãƒ»é‡ç”Ÿ",
        icon: "â˜ ï¸",
        upright: {
          meaning: "ä¸€æ®µé—œä¿‚æˆ–éšæ®µçµæŸï¼Œè¿å‘é‡ç”Ÿã€‚",
          bear: "ğŸ» ç†Šç†Šèªªï¼šæŠŠèˆŠçš„æ”¾ä¸‹ï¼Œä½ çš„æ‰‹æ‰èƒ½æ¥ä½æ–°çš„ç¦®ç‰©ã€‚"
        },
        reversed: {
          meaning: "å®³æ€•æ”¹è®Šã€åœæ»¯ã€‚",
          bear: "ğŸ» ç†Šç†Šèªªï¼šæ…¢æ…¢ä¾†ï¼Œä½ ä¸å¿…ä¸€æ¬¡æ”¾æ‰‹ï¼Œæˆ‘æœƒé™ªè‘—ä½ ã€‚"
        }
      },
      {
        name: "ç¯€åˆ¶",
        tag: "å¹³è¡¡ãƒ»æº«å’Œãƒ»æµå‹•",
        icon: "ğŸ’§",
        upright: {
          meaning: "æ‰¾åˆ°æœ€é©åˆè‡ªå·±çš„ç¯€å¥ã€‚",
          bear: "ğŸ» ç†Šç†Šèªªï¼šä¸ç”¨æ€¥ã€ä¸ç”¨è¡ï¼Œåªè¦ç©©ç©©åœ°ã€èˆ’æœåœ°å¾€å‰å°±å¾ˆå¥½ã€‚"
        },
        reversed: {
          meaning: "å¤±è¡¡ã€éåº¦å¿™ç¢Œæˆ–æ”¾ç¸±ã€‚",
          bear: "ğŸ» ç†Šç†Šèªªï¼šä¼‘æ¯ä¸æ˜¯æµªè²»ï¼Œæ˜¯è®“ä½ æ›´é †åˆ©çš„ç§˜å¯†æ­¦å™¨ã€‚"
        }
      },
      {
        name: "æƒ¡é­”",
        tag: "æŸç¸›ãƒ»æ…¾æœ›ãƒ»å£“åŠ›",
        icon: "ğŸ˜ˆ",
        upright: {
          meaning: "çœ‹è¦‹è‡ªå·±è¢«ä»€éº¼ç¶ä½ï¼Œæ˜¯è§£è„«çš„ç¬¬ä¸€æ­¥ã€‚",
          bear: "ğŸ» ç†Šç†Šèªªï¼šæ²’é—œä¿‚ï¼Œæˆ‘é™ªä½ ä¸€èµ·çœ‹çœ‹é‚£äº›è®“ä½ ä¸èˆ’æœçš„åœ°æ–¹ã€‚ä½ æ¯”å®ƒå€‘å¼·å¤§ã€‚"
        },
        reversed: {
          meaning: "æœ‰æ©Ÿæœƒè„«é›¢è² é¢ç¿’æ…£ã€‚",
          bear: "ğŸ» ç†Šç†Šèªªï¼šå¤ªå¥½äº†ï¼ä½ å·²ç¶“é–‹å§‹é¬†é–‹ç¹©å­äº†ï¼Œå†ä¸€æ­¥ä¸€æ­¥å°±èƒ½è‡ªç”±äº†ã€‚"
        }
      },
      {
        name: "é«˜å¡”",
        tag: "çªè®Šãƒ»æ‰“ç ´ãƒ»é‡å»º",
        icon: "ğŸ°",
        upright: {
          meaning: "èˆŠçš„çµæ§‹å´©è§£ï¼Œè¿ä¾†é‡å»ºæ©Ÿæœƒã€‚",
          bear: "ğŸ» ç†Šç†Šèªªï¼šé›–ç„¶çœ‹èµ·ä¾†å¯æ€•ï¼Œä½†é€™ä¸€æ­¥èƒ½è®“ä½ å¾—åˆ°çœŸæ­£é©åˆè‡ªå·±çš„ç”Ÿæ´»ã€‚"
        },
        reversed: {
          meaning: "å®³æ€•å´©å£ã€æ‹’çµ•é¢å°ã€‚",
          bear: "ğŸ» ç†Šç†Šèªªï¼šæ²’é—œä¿‚ï¼Œä½ å¯ä»¥æ…¢æ…¢ä¾†ã€‚åªè¦é¡˜æ„è·¨å‡ºä¸€å°æ­¥ï¼Œå°±æ˜¯é€²æ­¥ã€‚"
        }
      },
      {
        name: "æ˜Ÿæ˜Ÿ",
        tag: "å¸Œæœ›ãƒ»ç™‚ç™’ãƒ»é¡˜æœ›",
        icon: "â­",
        upright: {
          meaning: "å¸Œæœ›ã€éˆæ„Ÿã€ç¾å¥½çš„èƒ½é‡æµå‹•ã€‚",
          bear: "ğŸ» ç†Šç†Šèªªï¼šä½ å€¼å¾—æº«æŸ”ï¼Œä¹Ÿå€¼å¾—è¢«å…‰ç…§äº®ã€‚æœªä¾†æ­£åœ¨è®Šå¥½ã€‚"
        },
        reversed: {
          meaning: "æš«æ™‚å¤±å»æ–¹å‘ã€ç–²ç´¯ã€‚",
          bear: "ğŸ» ç†Šç†Šèªªï¼šæ²’é—œä¿‚ï¼Œå…ˆä¼‘æ¯ä¸€ä¸‹ï¼Œæ˜Ÿæ˜Ÿæœƒåœ¨å¤œè£¡ç­‰ä½ ã€‚"
        }
      },
      {
        name: "æœˆäº®",
        tag: "æƒ…ç·’ãƒ»è¿·éœ§ãƒ»ç›´è¦º",
        icon: "ğŸŒ™",
        upright: {
          meaning: "æƒ…ç·’èµ·ä¼ã€æ•æ„Ÿã€æ½›æ„è­˜è¨Šæ¯ã€‚",
          bear: "ğŸ» ç†Šç†Šèªªï¼šä½ çš„æ„Ÿå—å¾ˆé‡è¦ï¼Œè«‹ä¸è¦å¿½ç•¥å®ƒå€‘ã€‚"
        },
        reversed: {
          meaning: "å®³æ€•ã€æƒ³åƒèˆ‡ç¾å¯¦æ··é›œã€‚",
          bear: "ğŸ» ç†Šç†Šèªªï¼šè©¦è‘—åšä¸€ä»¶å¾ˆå°å¾ˆç°¡å–®çš„äº‹ï¼Œä½ æœƒæ…¢æ…¢æ‰¾å›ç©©å®šã€‚"
        }
      },
      {
        name: "å¤ªé™½",
        tag: "å–œæ‚…ãƒ»æˆåŠŸãƒ»è‡ªä¿¡",
        icon: "â˜€ï¸",
        upright: {
          meaning: "èƒ½é‡å……è¶³ã€å–œæ‚…ã€æˆåŠŸã€‚",
          bear: "ğŸ» ç†Šç†Šèªªï¼šä½ çœŸçš„å¾ˆæ£’ï¼ä¸–ç•Œæ­£åœ¨ç‚ºä½ æ‹æ‰‹å–”ï½"
        },
        reversed: {
          meaning: "ç–²ç´¯ã€å…§åœ¨å…‰è®Šå¼±ã€‚",
          bear: "ğŸ» ç†Šç†Šèªªï¼šä½ ä¸éœ€è¦ä¸€ç›´ç™¼å…‰ã€‚ç´¯äº†å°±ä¾†ç†Šç†Šé€™è£¡å……é›»ã€‚"
        }
      },
      {
        name: "å¯©åˆ¤",
        tag: "å¾©æ´»ãƒ»é†’æ‚Ÿãƒ»å¬å–š",
        icon: "ğŸ“£",
        upright: {
          meaning: "æ–°çš„å‘¼å–šã€ç¬¬äºŒæ¬¡æ©Ÿæœƒã€‚",
          bear: "ğŸ» ç†Šç†Šèªªï¼šä½ æ¯”ä»¥å‰æ›´æˆç†Ÿäº†ï¼Œé€™ä¸€æ¬¡ä½ æœƒåšå¾—æ›´å¥½ã€‚"
        },
        reversed: {
          meaning: "ç³¾çµã€ç„¡æ³•æ”¾ä¸‹éå»ã€‚",
          bear: "ğŸ» ç†Šç†Šèªªï¼šä½ å·²ç¶“ç›¡åŠ›äº†ï¼Œå¯ä»¥æº«æŸ”åœ°æ”¾éè‡ªå·±ã€‚"
        }
      },
      {
        name: "ä¸–ç•Œ",
        tag: "å®Œæˆãƒ»æ•´åˆãƒ»åœ“æ»¿",
        icon: "ğŸŒ",
        upright: {
          meaning: "ä¸€å€‹é‡è¦éšæ®µå³å°‡å®Œæˆï¼Œè¿å‘ä¸‹ä¸€æ—…ç¨‹ã€‚",
          bear: "ğŸ» ç†Šç†Šèªªï¼šæ­å–œä½ ï¼ä½ åšå¾—å¾ˆæ£’ï¼Œæ–°çš„ç¯‡ç« æ­£åœ¨ç­‰ä½ ã€‚"
        },
        reversed: {
          meaning: "å¿«å®Œæˆä½†å·®æœ€å¾Œä¸€æ­¥ã€‚",
          bear: "ğŸ» ç†Šç†Šèªªï¼šå†å¤šä¸€é»é»åŠªåŠ›ï¼Œä½ å°±æœƒçœ‹åˆ°å¾ˆç¾çš„çµæœã€‚"
        }
      }
    ];

    const startBtn = document.getElementById("startBtn");
    const starLayer = document.getElementById("starLayer");
    const bearDialog = document.getElementById("bearDialog");
    const bearMessageEl = document.getElementById("bearMessage");
    const againBtn = document.getElementById("againBtn");

    const slots = {
      past:  document.querySelector('.card-slot[data-position="past"]  .card'),
      present: document.querySelector('.card-slot[data-position="present"] .card'),
      future:  document.querySelector('.card-slot[data-position="future"] .card')
    };

    // reading = { past: { card, reversed }, present: {...}, future: {...} }
    let reading = null;
    let flippedCount = 0;
    let gameReady = false;

    // æ´—ç‰Œ
    function shuffle(array) {
      const arr = array.slice();
      for (let i = arr.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
      }
      return arr;
    }

    // æ˜Ÿæ˜Ÿç²’å­
    function spawnStarBurst(centerX, centerY, count = 8) {
      const rect = starLayer.getBoundingClientRect();
      for (let i = 0; i < count; i++) {
        const star = document.createElement("div");
        star.className = "star";
        const offsetX = (Math.random() - 0.5) * 40;
        const offsetY = (Math.random() - 0.5) * 10;
        star.style.left = (centerX - rect.left + offsetX) + "px";
        star.style.top  = (centerY - rect.top + offsetY) + "px";
        const delay = (Math.random() * 0.25).toFixed(2);
        star.style.animationDelay = delay + "s";
        starLayer.appendChild(star);
        star.addEventListener("animationend", () => star.remove());
      }
    }

    // è¨­å®šå–®å¼µå¡ç‰‡å…§å®¹
    function fillCard(cardEl, slotData) {
      const { card, reversed } = slotData;
      const nameEl    = cardEl.querySelector(".card-name");
      const tagEl     = cardEl.querySelector(".card-tag");
      const meaningEl = cardEl.querySelector(".card-meaning");
      const iconEl    = cardEl.querySelector(".card-icon");

      cardEl.classList.toggle("is-reversed", reversed);

      const side = reversed ? card.reversed : card.upright;
      nameEl.textContent    = card.name + (reversed ? "ï¼ˆé€†ä½ï¼‰" : "ï¼ˆæ­£ä½ï¼‰");
      tagEl.textContent     = card.tag;
      meaningEl.textContent = side.meaning;
      iconEl.textContent    = card.icon;
    }

    // ç†Šç†Šç¸½çµè¨Šæ¯ï¼ˆåŒ…å«ä¸‰å¼µç‰Œçš„ç†Šç†ŠèªéŒ„ï¼‰
    function buildBearMessage(reading) {
      const parts = [];

      function buildPart(label, slot) {
        const side = slot.reversed ? slot.card.reversed : slot.card.upright;
        const posText = slot.reversed ? "ï¼ˆé€†ä½ï¼‰" : "ï¼ˆæ­£ä½ï¼‰";
        return (
          `${label}ï¼š${slot.card.name}${posText}\n` +
          `ç‰Œçš„æé†’ï¼š${side.meaning}\n` +
          `${side.bear}`
        );
      }

      parts.push(buildPart("éå»", reading.past));
      parts.push(buildPart("ç¾åœ¨", reading.present));
      parts.push(buildPart("æœªä¾†", reading.future));

      return parts.join("\n\n") +
        "\n\nğŸ» æ‘é•·ç†Šç†Šå°ç¸½çµï¼š\nç‰Œåªæ˜¯æé†’ï¼Œä¸æ˜¯å‘½ä»¤ã€‚ä½ å¯ä»¥ç…§è‡ªå·±çš„æ­¥èª¿æ…¢æ…¢å‰é€²ï¼Œç†Šç†Šæœƒä¸€ç›´åœ¨é€™è£¡é™ªè‘—ä½ ã€‚";
    }

    // é–‹å§‹ä¸€æ¬¡æ–°çš„å åœ
    function startReading() {
      const shuffled = shuffle(tarotCards);

      reading = {
        past:    { card: shuffled[0], reversed: Math.random() < 0.5 },
        present: { card: shuffled[1], reversed: Math.random() < 0.5 },
        future:  { card: shuffled[2], reversed: Math.random() < 0.5 }
      };
      flippedCount = 0;
      gameReady = true;

      Object.entries(slots).forEach(([key, cardEl]) => {
        cardEl.classList.remove("flipped", "is-reversed", "show");
        cardEl.style.pointerEvents = "auto";
        void cardEl.offsetWidth; // é‡æ–°è§¸ç™¼å‹•ç•«
        fillCard(cardEl, reading[key]);
        cardEl.classList.add("show");
      });

      bearDialog.classList.add("hidden");

      const rect = startBtn.getBoundingClientRect();
      spawnStarBurst(rect.left + rect.width / 2, rect.top);

      startBtn.disabled = true;
      setTimeout(() => { startBtn.disabled = false; }, 1200);
    }

    // ç¶å®šå¡ç‰‡é»æ“Š
    function bindCardEvents() {
      Object.entries(slots).forEach(([key, cardEl]) => {
        cardEl.addEventListener("click", () => {
          if (!gameReady) return;
          if (cardEl.classList.contains("flipped")) return;

          cardEl.classList.add("flipped");
          flippedCount++;

          const rect = cardEl.getBoundingClientRect();
          spawnStarBurst(rect.left + rect.width / 2, rect.top + rect.height / 2, 10);

          if (flippedCount === 3) {
            setTimeout(() => {
              bearMessageEl.textContent = buildBearMessage(reading);
              bearDialog.classList.remove("hidden");
              gameReady = false;
            }, 600);
          }
        });
      });
    }

    startBtn.addEventListener("click", startReading);
    againBtn.addEventListener("click", startReading);

    bindCardEvents();
  </script>
</body>
</html>
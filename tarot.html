<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>ç†Šç†Šå¡”ç¾…å åœ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
  /* ç†Šç†Šçµæœå¤§å¡ç‰‡ï¼ˆä¸æ“‹ä½ç‰Œï¼‰ */
  .result-panel {
    margin-top: 14px;
    background: #fff7e6;
    border-radius: 18px;
    border: 2px solid #f5d3a6;
    box-shadow: 0 6px 18px rgba(0,0,0,0.35);
    padding: 12px 14px 14px;
    display: none;              /* ä¸€é–‹å§‹å…ˆéš±è— */
  }

  /* ç†Šç†Šæ–‡å­—ï¼šé¡è‰²åŠ æ·±ã€è¡Œè·åŠ å¤§ã€ä¿ç•™æ›è¡Œ */
  .result-panel-content {
    font-size: 13px;
    line-height: 1.6;
    color: #4b3044;
    white-space: pre-line;
  }

  * { box-sizing: border-box; }
  body {
    margin: 0;
    padding: 0;
    font-family: "Noto Sans TC", -apple-system, BlinkMacSystemFont, sans-serif;
    background: linear-gradient(180deg, #2d254a, #6a4f9c, #f9e4c8);
    color: #fff;
    display: flex;
    justify-content: center;
    align-items: flex-start;
    min-height: 100vh;
  }
  .game-wrap {
    max-width: 480px;
    width: 100%;
    padding: 16px;
    margin-top: 16px;
    position: relative;
    overflow: hidden;
  }
  .card-panel {
    background: rgba(255, 247, 230, 0.95);
    border-radius: 18px;
    border: 2px solid #f7dba5;
    box-shadow: 0 4px 14px rgba(0,0,0,0.25);
    padding: 18px 14px 20px;
    color: #4a3450;
  }
  h1 {
    margin: 0 0 4px;
    font-size: 22px;
    text-align: center;
    letter-spacing: 0.15em;
  }
  .subtitle {
    text-align: center;
    font-size: 13px;
    color: #7c5c88;
    margin-bottom: 12px;
  }
  .star-divider {
    text-align: center;
    font-size: 16px;
    margin-bottom: 10px;
  }
  .btn-bar {
    text-align: center;
    margin-bottom: 10px;
  }
  button {
    border: none;
    border-radius: 999px;
    padding: 10px 22px;
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
    background: linear-gradient(135deg, #ffcf5f, #ff9f7b);
    color: #4a2a18;
    box-shadow: 0 3px 8px rgba(0,0,0,0.25);
    transition: transform 0.1s ease, box-shadow 0.1s ease, opacity 0.2s ease;
  }
  button:active {
    transform: translateY(1px) scale(0.98);
    box-shadow: 0 1px 4px rgba(0,0,0,0.3);
  }
  button:disabled {
    opacity: 0.6;
    cursor: default;
    box-shadow: none;
  }

  /* ä¸‰å¼µç‰Œå€åŸŸ */
  .table {
    margin-top: 10px;
    display: flex;
    justify-content: space-between;
    gap: 6px;
  }
  .slot-title {
    text-align: center;
    font-size: 12px;
    color: #8f6c9b;
    margin-bottom: 4px;
  }
  .card-slot {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
  }

  /* å¡ç‰‡æœ¬é«” */
  .card {
    width: 90px;
    height: 140px;
    perspective: 900px;
    cursor: pointer;
    opacity: 0;
    transform: translateY(20px) scale(0.9);
    pointer-events: none;
    transition: transform 0.2s ease;
  }
  .card.show {
    animation: cardEnter 0.45s forwards;
  }
  .card-inner {
    width: 100%;
    height: 100%;
    position: relative;
    transform-style: preserve-3d;
    transition: transform 0.6s ease;
  }
  /* æ­£ä½ï¼šå¾€ä¸€é‚Šç¿» */
  .card.flipped .card-inner {
    transform: rotateY(180deg);
  }
  /* é€†ä½ï¼šå¾€å¦ä¸€é‚Šç¿»ï¼ˆåæ–¹å‘æ—‹è½‰ï¼‰ */
  .card.is-reversed.flipped .card-inner {
    transform: rotateY(-180deg);
  }
  .card-face {
    position: absolute;
    inset: 0;
    border-radius: 12px;
    backface-visibility: hidden;
    box-shadow: 0 4px 9px rgba(0,0,0,0.25);
  }

  /* ç‰ŒèƒŒï¼šåªé¡¯ç¤ºåœ–ç‰‡ï¼Œä¸é¡¯ç¤ºä»»ä½•æ–‡å­— */
  .card-back {
    background: none;
    border: none;
    font-size: 0;
    overflow: hidden;
  }
  .card-back img {
    width: 100%;
    height: 100%;
    display: block;
    border-radius: 12px;
  }

  .card-front {
    transform: rotateY(180deg);   /* ä¸€é–‹å§‹æ­£é¢æœå…§ï¼Œçœ‹ä¸åˆ° */
    background: #fff9ef;
    border: 2px solid #f3c79b;
    padding: 10px 7px;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
  }
  /* é€†ä½ï¼šé‚Šæ¡†é¡è‰²ç•¥æœ‰ä¸åŒï¼‹å¾®å¾®æ­ªæ–œæ„Ÿ */
  .card.is-reversed .card-front {
    border-color: #b895f5;
  }
  .card.is-reversed {
    transform: translateY(20px) scale(0.9) rotateZ(-2deg);
  }
  .card.show.is-reversed {
    animation: cardEnterReversed 0.45s forwards;
  }

  .card-name {
    font-size: 13px;
    font-weight: 700;
    text-align: center;
    color: #7a3f5f;
    margin-bottom: 4px;
  }
  .card-tag {
    font-size: 11px;
    text-align: center;
    color: #c77a68;
    margin-bottom: 6px;
  }
  .card-meaning {
    font-size: 11px;
    line-height: 1.4;
    color: #5c3b4c;
    flex: 1;
  }
  .card-icon {
    text-align: center;
    font-size: 18px;
    margin-top: 4px;
  }

  @keyframes cardEnter {
    from { opacity: 0; transform: translateY(20px) scale(0.9); }
    to   { opacity: 1; transform: translateY(0) scale(1); }
  }
  @keyframes cardEnterReversed {
    from { opacity: 0; transform: translateY(20px) scale(0.9) rotateZ(-5deg); }
    to   { opacity: 1; transform: translateY(0) scale(1) rotateZ(-2deg); }
  }

  /* ç†Šç†Šå°è©±æ¡†ï¼ˆç›®å‰æ²’ç”¨åˆ°ï¼Œä½†å…ˆä¿ç•™ï¼‰ */
  .bear-dialog {
    position: fixed;
    left: 50%;
    bottom: 8%;
    transform: translateX(-50%);
    max-width: 460px;
    width: calc(100% - 32px);
    display: flex;
    align-items: flex-start;
    gap: 10px;
    background: rgba(255, 247, 230, 0.98);
    border-radius: 18px;
    border: 2px solid #f5d3a6;
    box-shadow: 0 6px 18px rgba(0,0,0,0.35);
    padding: 10px 12px 12px;
    color: #4b3044;
    z-index: 30;
    animation: bearPop 0.4s ease-out;
  }
  .bear-dialog.hidden { display: none; }
  .bear-avatar {
    width: 42px;
    height: 42px;
    border-radius: 50%;
    background: radial-gradient(circle at 30% 20%, #ffeaa7, #ff9f7b);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 26px;
    flex-shrink: 0;
  }
  .bear-text { flex: 1; font-size: 13px; }
  .bear-title {
    font-weight: 700;
    margin-bottom: 4px;
    color: #8a4d5c;
  }
  .bear-message {
    font-size: 13px;
    line-height: 1.5;
    white-space: pre-line;
    margin-bottom: 6px;
  }
  .bear-actions { text-align: right; }
  .bear-actions button {
    font-size: 12px;
    padding: 6px 14px;
    box-shadow: none;
  }
  @keyframes bearPop {
    from { transform: translate(-50%, 40px) scale(0.9); opacity: 0; }
    to   { transform: translate(-50%, 0) scale(1); opacity: 1; }
  }

  /* æ˜Ÿæ˜Ÿç²’å­å±¤ */
  .star-layer {
    pointer-events: none;
    position: absolute;
    inset: 0;
    overflow: hidden;
    z-index: -1;
  }
  .star {
    position: absolute;
    width: 4px;
    height: 4px;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.9);
    box-shadow: 0 0 6px rgba(255,255,255,0.9);
    animation: starFloat 1.4s ease-out forwards;
    opacity: 0;
  }
  @keyframes starFloat {
    0% {
      transform: translate3d(0, 10px, 0) scale(0.3);
      opacity: 0;
    }
    20% { opacity: 1; }
    100% {
      transform: translate3d(0, -40px, 0) scale(1);
      opacity: 0;
    }
  }

  .hint {
    text-align: center;
    font-size: 11px;
    color: #edd2f4;
    margin-top: 6px;
  }

  @media (max-width: 400px) {
    #historyBox {
      color: #4b3044;
      font-size: 13px;
      line-height: 1.6;
    }
    #historyBox pre {
      color: #4b3044;
      font-size: 13px;
      line-height: 1.6;
      white-space: pre-line;
      margin-top: 4px;
    }
    .history-title {
      color: #8a4d5c;
      font-weight: 700;
      margin-bottom: 4px;
    }
    .card {
      width: 80px;
      height: 124px;
    }
  }
  </style>
</head>
<body>
  <div class="game-wrap">
    <!-- æ˜Ÿæ˜Ÿç²’å­å±¤ï¼ˆä¿ç•™åŸæœ¬å‹•ç•«ç”¨ï¼‰ -->
    <div class="star-layer" id="starLayer"></div>

    <!-- ä¸Šæ–¹ç°¡å–®è¿”å›éµ -->
    <div style="margin-bottom: 8px;">
      <a href="index.html"
         style="display:inline-flex;align-items:center;gap:4px;
                padding:6px 10px;border-radius:999px;
                background:rgba(0,0,0,0.15);color:#f9e4c8;
                font-size:12px;text-decoration:none;">
        ğŸ  å›åˆ°å°å‹‡è€…ä¸»é 
      </a>
    </div>

    <!-- ä¸»å¡ç‰‡å€ -->
    <div class="card-panel">
      <h1>ç†Šç†Šå¡”ç¾…å åœ</h1>
      <div class="subtitle">æ·±å‘¼å¸ 3 ç§’ï¼Œå¿ƒè£¡é»˜å¿µå•é¡Œï¼Œç„¶å¾Œé»ä¸‹æŒ‰éˆ•ã€‚</div>
      <div class="star-divider">âœ¦ âœ¦ âœ¦</div>

      <div class="btn-bar">
        <button id="startBtn">
          <span class="btn-icon">ğŸ”®</span>
          <span>é–‹å§‹å åœ</span>
        </button>
      </div>

      <!-- ä¸‰å¼µç‰Œ -->
      <div class="table">
        <!-- éå» -->
        <div class="card-slot" data-position="past">
          <div class="slot-title">éå»</div>
          <div class="card">
            <div class="card-inner">
              <div class="card-face card-back"></div>
              <div class="card-face card-front">
                <div class="card-name"></div>
                <div class="card-tag"></div>
                <div class="card-meaning"></div>
                <div class="card-icon"></div>
              </div>
            </div>
          </div>
        </div>

        <!-- ç¾åœ¨ -->
        <div class="card-slot" data-position="present">
          <div class="slot-title">ç¾åœ¨</div>
          <div class="card">
            <div class="card-inner">
              <div class="card-face card-back"></div>
              <div class="card-face card-front">
                <div class="card-name"></div>
                <div class="card-tag"></div>
                <div class="card-meaning"></div>
                <div class="card-icon"></div>
              </div>
            </div>
          </div>
        </div>

        <!-- æœªä¾† -->
        <div class="card-slot" data-position="future">
          <div class="slot-title">æœªä¾†</div>
          <div class="card">
            <div class="card-inner">
              <div class="card-face card-back"></div>
              <div class="card-face card-front">
                <div class="card-name"></div>
                <div class="card-tag"></div>
                <div class="card-meaning"></div>
                <div class="card-icon"></div>
              </div>
            </div>
          </div>
        </div>
      </div><!-- .table -->
    </div><!-- .card-panel -->

    <!-- ç†Šç†Šçµæœé¢æ¿ -->
    <div id="resultPanel" class="result-panel">
      <div style="display:flex;gap:10px;align-items:flex-start;margin-bottom:8px;">
        <div style="font-size:26px;flex-shrink:0;">ğŸ»</div>
        <div style="flex:1;">
          <div style="font-weight:700;margin-bottom:4px;color:#8a4d5c;">
            æ‘é•·ç†Šç†Šçš„å°æé†’
          </div>
          <div id="resultText" class="result-panel-content">
            ä»Šå¤©çš„èƒ½é‡æ­£åœ¨æº–å‚™ä¸­â€¦
          </div>
        </div>
      </div>

      <div class="result-btns" style="display:flex;gap:10px;">
        <button id="againBtn">
          <span class="btn-icon icon-repeat"></span>
          <span>å†å ä¸€æ¬¡</span>
        </button>

        <button id="toggleHistoryBtn">
          <span class="btn-icon icon-scroll"></span>
          <span>æŠ½ç‰Œç´€éŒ„</span>
        </button>

        <button id="downloadBtn">
          <span class="btn-icon icon-download"></span>
          <span>ä¸‹è¼‰æ–‡å­—</span>
        </button>
      </div>

      <!-- æŠ½ç‰Œç´€éŒ„é¡¯ç¤ºå€ -->
      <div id="historyBox"
           style="margin-top:10px;border-top:1px dashed #e4c8aa;
                  padding-top:6px;font-size:12px;max-height:160px;
                  overflow-y:auto;display:none;">
        <div style="color:#a88c93;">ç›®å‰é‚„æ²’æœ‰ç´€éŒ„å–”ï½å…ˆå®Œæˆä¸€æ¬¡å åœçœ‹çœ‹ã€‚</div>
      </div>
    </div>

    <div class="hint">æç¤ºï¼šæŒ‰ã€Œé–‹å§‹å åœã€å¾Œï¼Œä¾åºé»ä¸‰å¼µç‰Œç¿»é–‹å”· âœ¨</div>
  </div><!-- .game-wrap -->

<script>
/* =============== 22 å¤§ç§˜å„€è³‡æ–™ï¼ˆç•¥ï¼šèˆ‡ä½ åŸæœ¬ç›¸åŒï¼‰ =============== */
const tarotCards = [/* é€™è£¡æ”¾ä½ åŸæœ¬çš„ 0~21 å¡ç‰‡ç‰©ä»¶ï¼Œä¸å‹• */ 
  /* ç‚ºäº†ç¯€çœç¯‡å¹…ï¼Œç›´æ¥ç”¨ä½ ä¸Šé¢é‚£ä»½ tarotCards é™£åˆ— */
  {"id":0,"name":"æ„šè€…","tag":"æ–°çš„é–‹å§‹ãƒ»è‡ªç”±ãƒ»æ—…ç¨‹","icon":"ğŸ’",
   upright:{meaning:"æ–°çš„æ—…ç¨‹ã€å‹‡æ•¢å˜—è©¦ã€å¸¶è‘—å¥½å¥‡å¿ƒå¾€å‰èµ°ï¼Œå…è¨±è‡ªå·±ç•¶æ–°æ‰‹ã€‚",
            bear:"ğŸ» ç†Šç†Šèªªï¼šå°±ç®—ä¸çŸ¥é“æœƒç™¼ç”Ÿä»€éº¼ä¹Ÿæ²’é—œä¿‚ã€‚ä½ é¡˜æ„è¸å‡ºå»çš„é‚£ä¸€æ­¥ï¼Œå°±æ˜¯æœ€å²å®³çš„å‹‡æ°£ï¼"},
   reversed:{meaning:"è¡å‹•æˆ–é€ƒé¿ï¼Œæé†’ä½ åœ¨å†’éšªå‰å…ˆåšå¥½åŸºæœ¬æº–å‚™ã€‚",
             bear:"ğŸ» ç†Šç†Šèªªï¼šåœä¸€ä¸‹æ²’é—œä¿‚ï¼Œæˆ‘åœ¨é€™è£¡é™ªä½ ã€‚æº–å‚™å¥½äº†å†èµ°ï¼Œä¹Ÿæ˜¯ä¸€ç¨®å¾ˆæ£’çš„å‹‡æ•¢å–”ã€‚"}},
  /* â€¦â€¦å…¶é¤˜ 1~21 æŒ‰ä½ åŸæœ¬çš„å…§å®¹è²¼å›ä¾† â€¦â€¦ */
];
/* ä¸Šé¢è¨˜å¾—æ•´å€‹ç”¨ä½ åŸæœ¬çš„ tarotCards é™£åˆ—å–ä»£ï¼Œæˆ‘é€™è£¡åªæ˜¯ç¤ºæ„ã€‚ */

/* =============== å·¥å…· =============== */
function shuffle(arr) {
  const a = arr.slice();
  for (let i = a.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [a[i], a[j]] = [a[j], a[i]];
  }
  return a;
}

/* DOM å–å¾— */
const startBtn = document.getElementById("startBtn");
const againBtn = document.getElementById("againBtn");
const toggleHistoryBtn = document.getElementById("toggleHistoryBtn");
const downloadBtn = document.getElementById("downloadBtn");
const resultPanel = document.getElementById("resultPanel");
const resultText = document.getElementById("resultText");
const historyBox = document.getElementById("historyBox");
const starLayer = document.getElementById("starLayer");

const cardSlots = {
  past: document.querySelector('.card-slot[data-position="past"] .card'),
  present: document.querySelector('.card-slot[data-position="present"] .card'),
  future: document.querySelector('.card-slot[data-position="future"] .card')
};

/* æ˜Ÿæ˜Ÿç²’å­ */
function spawnStar(x, y, count = 8) {
  if (!starLayer) return;
  const rect = starLayer.getBoundingClientRect();
  for (let i = 0; i < count; i++) {
    const el = document.createElement("div");
    el.className = "star";
    el.style.left = x - rect.left + (Math.random() * 40 - 20) + "px";
    el.style.top  = y - rect.top  + (Math.random() * 20 - 10) + "px";
    el.style.animationDelay = (Math.random() * 0.25) + "s";
    starLayer.appendChild(el);
    el.addEventListener("animationend", () => el.remove());
  }
}

/* å¡ç‰ŒèƒŒ + æ­£é¢åœ–ç‰‡ */
function setupCardImage(slotKey, slotData) {
  const cardEl = cardSlots[slotKey];
  const inner = cardEl.querySelector(".card-inner");

  cardEl.classList.remove("flipped", "is-reversed", "show");
  cardEl.style.pointerEvents = "auto";

  if (slotData.reversed) {
    cardEl.classList.add("is-reversed");
  } else {
    cardEl.classList.remove("is-reversed");
  }

  inner.innerHTML = `
    <div class="card-face card-back">
      <img src="images/back.png"
           style="width:100%;height:100%;border-radius:12px;" />
    </div>
    <div class="card-face card-front">
      <img src="images/${slotData.card.id}.png"
           style="width:100%;height:100%;border-radius:12px;" />
    </div>
  `;

  // å‡ºå ´å‹•ç•«
  void cardEl.offsetWidth;
  cardEl.classList.add("show");
}

/* çµ„åˆç†Šç†Šè¨Šæ¯ */
function buildBearMessage(r) {
  function part(label, slot) {
    const side = slot.reversed ? slot.card.reversed : slot.card.upright;
    const pos = slot.reversed ? "ï¼ˆé€†ä½ï¼‰" : "ï¼ˆæ­£ä½ï¼‰";
    return `${label}ï¼š${slot.card.name}${pos}\nç‰Œçš„æé†’ï¼š${side.meaning}\n${side.bear}\n`;
  }

  return (
    part("éå»", r.past) +
    "\n" +
    part("ç¾åœ¨", r.present) +
    "\n" +
    part("æœªä¾†", r.future) +
    "\nğŸ» æ‘é•·ç†Šç†Šå°ç¸½çµï¼š\nç‰Œåªæ˜¯æé†’ï¼Œä¸æ˜¯å‘½ä»¤ã€‚\nä½ å¯ä»¥ç…§è‡ªå·±çš„æ­¥èª¿æ…¢æ…¢å‰é€²ï¼Œç†Šç†Šæœƒä¸€ç›´åœ¨é€™è£¡é™ªä½ ã€‚"
  );
}

/* æŠ½ç‰Œç´€éŒ„ */
const HISTORY_KEY = "bearTarotHistoryV1";
let historyList = [];

function loadHistory() {
  try {
    const raw = localStorage.getItem(HISTORY_KEY);
    if (!raw) return;
    const parsed = JSON.parse(raw);
    if (Array.isArray(parsed)) historyList = parsed;
  } catch (e) {
    console.warn("è®€å–å åœç´€éŒ„å¤±æ•—ï¼š", e);
  }
}

function saveHistory() {
  try {
    localStorage.setItem(HISTORY_KEY, JSON.stringify(historyList));
  } catch (e) {
    console.warn("å„²å­˜å åœç´€éŒ„å¤±æ•—ï¼š", e);
  }
}

function updateHistoryBox() {
  if (!historyList.length) {
    historyBox.innerHTML =
      '<div style="color:#a88c93;">ç›®å‰é‚„æ²’æœ‰ç´€éŒ„å–”ï½å…ˆå®Œæˆä¸€æ¬¡å åœçœ‹çœ‹ã€‚</div>';
    return;
  }

  historyBox.innerHTML = historyList
    .map((item, index) => {
      return `
        <div style="margin-bottom:14px;">
          <div class="history-title">
            ç¬¬ ${index + 1} æ¬¡å åœï¼ˆ${item.time}ï¼‰
          </div>
          <pre style="white-space:pre-line;">${item.text}</pre>
        </div>
      `;
    })
    .join("");
}

/* ä¸‹è¼‰æ–‡å­—æª” */
function downloadReading(text) {
  const blob = new Blob([text], { type: "text/plain;charset=utf-8" });
  const url = URL.createObjectURL(blob);
  const a = document.createElement("a");
  a.href = url;
  a.download = "ä»Šæ—¥ç†Šç†Šå åœ.txt";
  a.click();
  URL.revokeObjectURL(url);
}

/* æŠ½ç‰Œä¸»æµç¨‹ */
let reading = null;
let flippedCount = 0;

function startReading() {
  flippedCount = 0;
  resultPanel.style.display = "none";
  historyBox.style.display = "none";

  const shuffled = shuffle(tarotCards);
  reading = {
    past:    { card: shuffled[0], reversed: Math.random() < 0.5 },
    present: { card: shuffled[1], reversed: Math.random() < 0.5 },
    future:  { card: shuffled[2], reversed: Math.random() < 0.5 }
  };

  setupCardImage("past", reading.past);
  setupCardImage("present", reading.present);
  setupCardImage("future", reading.future);

  const r = startBtn.getBoundingClientRect();
  spawnStar(r.left + r.width / 2, r.top);

  startBtn.disabled = true;
  setTimeout(() => (startBtn.disabled = false), 800);
}

/* é»æ“Šç¿»ç‰Œ */
Object.entries(cardSlots).forEach(([key, cardEl]) => {
  cardEl.addEventListener("click", () => {
    if (!reading) return;
    if (cardEl.classList.contains("flipped")) return;

    cardEl.classList.add("flipped");
    flippedCount++;

    const r = cardEl.getBoundingClientRect();
    spawnStar(r.left + r.width / 2, r.top + r.height / 2, 10);

    if (flippedCount === 3) {
      setTimeout(() => {
        const msg = buildBearMessage(reading);

        resultText.textContent = msg;
        resultPanel.style.display = "block";

        const now = new Date();
        const timeLabel = now.toLocaleString("zh-TW", {
          month: "2-digit",
          day: "2-digit",
          hour: "2-digit",
          minute: "2-digit"
        });

        historyList.unshift({
          time: timeLabel,
          text: msg
        });

        saveHistory();
        updateHistoryBox();
      }, 600);
    }
  });
});

/* æŒ‰éˆ•äº‹ä»¶ */
startBtn.addEventListener("click", startReading);
againBtn.addEventListener("click", startReading);

toggleHistoryBtn.addEventListener("click", () => {
  historyBox.style.display =
    historyBox.style.display === "none" ? "block" : "none";
});

downloadBtn.addEventListener("click", () => {
  if (!resultText.textContent) return;
  downloadReading(resultText.textContent);
});

/* åˆå§‹è¼‰å…¥æ­·å² */
loadHistory();
updateHistoryBox();
</script>
</body>
</html>